<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Connect/authenticate to a CATMAID server, returning a connection object — catmaid_login • catmaid</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Connect/authenticate to a CATMAID server, returning a connection object — catmaid_login" />
<meta property="og:description" content="catmaid_login allows you to login to a CATMAID server 
  specified by a catmaid_connection object. If such an object is not 
  specified, then the last successful connection in this R session is reused 
  if possible otherwise a new connection object is created using 
  options of the form &quot;catmaid.\*&quot; or &quot;catmaid_\*&quot; (see details).  
The connection object returned by catmaid_login (or cached when 
  Cache=TRUE, the default) can then be used for future requests to the
  CATMAID server by get/query/fetch functions.
catmaid_connection is a lower level function used by
  catmaid_login to create a connection object. End users should not
  need to call this directly, but it does document the arguments that can be
  used to specify a connection to a CATMAID server.
print.catmaid_connection provides a convenient summary of
  the status of a catmaid_connection." />
<meta property="og:image" content="/logo.svg" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">catmaid</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.10.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/example-drosophila-larva-olfactory-system.html">Introductory Example - Drosophila Larval Olfaction</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
<li>
  <a href="../SUPPORT.html">Help</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://natverse.github.io">natverse</a>
</li>
<li>
  <a href="https://github.com/jefferis/rcatmaid">
    <span class="fas fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Connect/authenticate to a CATMAID server, returning a connection object</h1>
    <small class="dont-index">Source: <a href='https://github.com/jefferis/rcatmaid/blob/master/R/catmaid_connection.R'><code>R/catmaid_connection.R</code></a></small>
    <div class="hidden name"><code>catmaid_login.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>catmaid_login</code> allows you to login to a CATMAID server 
  specified by a <code>catmaid_connection</code> object. If such an object is not 
  specified, then the last successful connection in this R session is reused 
  if possible otherwise a new connection object is created using 
  <code>options</code> of the form "catmaid.\*" or "catmaid_\*" (see details).</p>  
<p>The connection object returned by <code>catmaid_login</code> (or cached when 
  <code>Cache=TRUE</code>, the default) can then be used for future requests to the
  CATMAID server by get/query/fetch functions.</p>
<p><code>catmaid_connection</code> is a lower level function used by
  <code>catmaid_login</code> to create a connection object. End users should not
  need to call this directly, but it does document the arguments that can be
  used to specify a connection to a CATMAID server.</p>
<p><code>print.catmaid_connection</code> provides a convenient summary of
  the status of a <code>catmaid_connection</code>.</p>
    </div>

    <pre class="usage"><span class='fu'>catmaid_login</span><span class='op'>(</span>conn <span class='op'>=</span> <span class='cn'>NULL</span>, <span class='va'>...</span>, Cache <span class='op'>=</span> <span class='cn'>TRUE</span>, Force <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>

<span class='fu'>catmaid_connection</span><span class='op'>(</span>
  <span class='va'>server</span>,
  username <span class='op'>=</span> <span class='cn'>NULL</span>,
  password <span class='op'>=</span> <span class='cn'>NULL</span>,
  authname <span class='op'>=</span> <span class='cn'>NULL</span>,
  authpassword <span class='op'>=</span> <span class='cn'>NULL</span>,
  token <span class='op'>=</span> <span class='cn'>NULL</span>,
  authtype <span class='op'>=</span> <span class='cn'>NULL</span>,
  config <span class='op'>=</span> <span class='cn'>NULL</span>
<span class='op'>)</span>

<span class='co'># S3 method for catmaid_connection</span>
<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>...</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>conn</th>
      <td><p>An optional <code>catmaid_connection</code> connection object.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Additional arguments passed to catmaid_connection</p></td>
    </tr>
    <tr>
      <th>Cache</th>
      <td><p>Whether to cache open connections at login so that they can be 
reused automatically.</p></td>
    </tr>
    <tr>
      <th>Force</th>
      <td><p>Whether to force a new login to the CATMAID server (default 
<code>FALSE</code>)</p></td>
    </tr>
    <tr>
      <th>server</th>
      <td><p>url of CATMAID server</p></td>
    </tr>
    <tr>
      <th>username, password</th>
      <td><p>Your CATMAID username and password.</p></td>
    </tr>
    <tr>
      <th>authname, authpassword</th>
      <td><p>The http username/password that optionally
secures the CATMAID website. These are not the same as your CATMAID login
details.</p></td>
    </tr>
    <tr>
      <th>token</th>
      <td><p>An API token (A modern alternative to providing your CATMAID
username and password). See <b>Token based authentication</b> for details.</p></td>
    </tr>
    <tr>
      <th>authtype</th>
      <td><p>The http authentication scheme, see
<code><a href='https://httr.r-lib.org/reference/authenticate.html'>authenticate</a></code> for details.</p></td>
    </tr>
    <tr>
      <th>config</th>
      <td><p>Additional curl config options. See <code><a href='https://httr.r-lib.org/reference/config.html'>config</a></code>
for details and the examples section below.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>a <code>catmaid_connection</code> object that can be used to make 
  authenticated http requests to a CATMAID server, specifically by making use
  of the <code>$config</code> field.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>After successful login, the <code>catmaid_connection</code> object will 
  contain a <code>cookie</code> field that includes a sessionid that is required 
  for subsequent GET/POST operations.  When <code>Cache=TRUE</code> (the default) 
  the open connection object is cached and will be used when EITHER 
  <code>catmaid_login</code> is called with enough information to indicate that the
  same server is desired OR (when no information about the server is passed 
  to <code>catmaid_login</code>) the last opened connection will be used.</p>
<p>Note the difference between <code>authname</code>/<code>authpassword</code> and
  <code>username</code>/<code>password</code>. The former are for generic web
  authentication, which is sometimes used to protect a private catmaid site
  from being accessible to general web traffic. The latter are used to
  authenticate to the CATMAID web application itself - for example the
  <code>username</code> is the one that will be associated with any tracing carried
  out by you in CATMAID.</p>
    <h2 class="hasAnchor" id="token-based-authentication"><a class="anchor" href="#token-based-authentication"></a>Token based authentication</h2>

    <p>CATMAID offers token based 
  authentication as the strongly preferred alternative to specifying you
  CATMAID username and password. See
  <a href='http://catmaid.github.io/dev/api.html#api-token'>http://catmaid.github.io/dev/api.html#api-token</a> for how to get an API
  token. You can then set the <code>catmaid.token</code> or <code>catmaid_token</code> package option, but no
  longer need to set the <code>catmaid.username</code> or <code>catmaid_username</code> and <code>catmaid.password</code> or <code>catmaid_password</code>
  options.</p>  
<p>Note that you must <b>NOT</b> reveal this token e.g. by checking it into a 
  version controlled script as it gives complete access to your CATMAID 
  account.</p>
    <h2 class="hasAnchor" id="environment-variables"><a class="anchor" href="#environment-variables"></a>Environment variables</h2>

    

  
<p>You will very likely want to set the following environment variables in 
  your <code>.Renviron</code> file (see <code><a href='https://rdrr.io/r/base/Startup.html'>Startup</a></code> for details). This 
  file is read by R on startup. In this way the catmaid package will 
  automatically login to your preferred CATMAID server. Note that environment
  variables will also be inherited by child R sessions. This means for
  example that they will be available when running knitr reports, tests or R
  CMD Check from Rstudio.</p>  
<p></p><ul>
<li><p><code>catmaid.server</code> or <code>catmaid_server</code></p></li>
<li><p><code>catmaid.token</code> or <code>catmaid_token</code> Preferred to using catmaid.username/password</p></li>
<li><p><code>catmaid.authname</code> or <code>catmaid_authname</code> Optional username for basic http website 
  authorisation</p></li>
<li><p><code>catmaid.authpassword</code> or <code>catmaid_authpassword</code> Optional password for basic http website
  authorisation</p></li>
<li><p><code>catmaid.username</code> or <code>catmaid_username</code> Your catmaid username (deprecated in favour 
  of token)</p></li>
<li><p><code>catmaid.password</code> or <code>catmaid_password</code> Your catmaid password (deprecated in favour 
  of token)</p></li>
</ul><p>An example <code>.Renviron</code> file might look like (the periods(.) in the environmental variable name can be also replaced
  with underscore(_) as mentioned above:</p>  
<p></p><pre>
<span class='va'>catmaid.server</span><span class='op'>=</span><span class='st'>"https://mycatmaidserver.org/catmaidroot"</span>
<span class='va'>catmaid.token</span><span class='op'>=</span><span class='st'>"9944b09199c62bcf9418ad846dd0e4bbdfc6ee4b"</span>
<span class='va'>catmaid.authname</span><span class='op'>=</span><span class='st'>"Calvin"</span>
<span class='va'>catmaid.authpassword</span><span class='op'>=</span><span class='st'>"hobbes"</span>
  </pre>
  
<p>and <b>must</b> finish with a return at the end of the last line. See
  <a href='http://catmaid.github.io/dev/api.html#api-token'>http://catmaid.github.io/dev/api.html#api-token</a> for details of 
  obtaining an API token</p>
    <h2 class="hasAnchor" id="options"><a class="anchor" href="#options"></a>Options</h2>

    <p>Although setting environment variables is now the recommended 
  approach, you can also set R startup options e.g. in your <code>.Rprofile</code>
  to specify default CATMAID login options including your personal access 
  token. The startup options have the same names as the environment variables
  listed above, so you can place code along the lines of:</p>  
<p><code><a href='https://rdrr.io/r/base/options.html'>options(catmaid.server="https://mycatmaidserver.org/catmaidroot", 
  catmaid.authname="Calvin",catmaid.authpassword="hobbes", catmaid.token = 
  "9944b09199c62bcf9418ad846dd0e4bbdfc6ee4b")</a></code></p>  
<p>in your <code>.Rprofile</code> (see <code><a href='https://rdrr.io/r/base/Startup.html'>Startup</a></code> for details). Note that
  it is important to have a final return at the end of your <code>.Rprofile</code>
  file.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='https://rdrr.io/r/base/options.html'>options</a></code>, <code><a href='https://rdrr.io/r/base/Startup.html'>Startup</a></code>,
  <code><a href='vfbcatmaid.html'>vfbcatmaid</a></code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># but see vfbcatmaid() convenience function</span>
<span class='fu'>catmaid_login</span><span class='op'>(</span>server<span class='op'>=</span><span class='st'>"https://l1em.catmaid.virtualflybrain.org"</span><span class='op'>)</span>
</div><div class='output co'>#&gt; Connection to catmaid server:
#&gt;   https://l1em.catmaid.virtualflybrain.org
#&gt; Login active since: Sun, 28 Feb 2021 12:08:37 GMT</div><div class='input'>
<span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span>
<span class='co'>## example explicitly specifying connection options</span>
<span class='co'># using modern token based authentication</span>
<span class='va'>conn</span> <span class='op'>=</span> <span class='fu'>catmaid_login</span><span class='op'>(</span>server<span class='op'>=</span><span class='st'>"https://mycatmaidserver.org/catmaidroot"</span>,
  authname<span class='op'>=</span><span class='st'>"Calvin"</span>,authpassword<span class='op'>=</span><span class='st'>"hobbes"</span>, 
  token<span class='op'>=</span><span class='st'>"9944b09199c62bcf9418ad846dd0e4bbdfc6ee4b"</span><span class='op'>)</span>
  
<span class='co'># ... or using the old fashioned approach specifiy username/password</span>
<span class='va'>conn</span> <span class='op'>=</span> <span class='fu'>catmaid_login</span><span class='op'>(</span>server<span class='op'>=</span><span class='st'>"https://mycatmaidserver.org/catmaidroot"</span>,
  authname<span class='op'>=</span><span class='st'>"Calvin"</span>,authpassword<span class='op'>=</span><span class='st'>"hobbes"</span>, 
  username<span class='op'>=</span><span class='st'>"calvin"</span>, password<span class='op'>=</span><span class='st'>"hobbesagain"</span><span class='op'>)</span>

<span class='co'>## examples assuming that catmaid.* environment variables/options are set</span>
<span class='va'>conn</span> <span class='op'>=</span> <span class='fu'>catmaid_login</span><span class='op'>(</span><span class='op'>)</span>
<span class='va'>conn</span> <span class='op'>=</span> <span class='fu'>catmaid_login</span><span class='op'>(</span>server<span class='op'>=</span><span class='st'>'https://someotherserver.org/catmaidroot'</span><span class='op'>)</span>

<span class='co'>## set additional curl options/headers</span>
<span class='co'># This example will bypass an SSL certificate verification error on the</span>
<span class='co'># remote host e.g. if it has expired. Don't this regularly of course!</span>
<span class='va'>conn</span> <span class='op'>=</span> <span class='fu'>catmaid_login</span><span class='op'>(</span>config<span class='op'>=</span><span class='fu'>httr</span><span class='fu'>::</span><span class='fu'><a href='https://httr.r-lib.org/reference/config.html'>config</a></span><span class='op'>(</span>ssl_verifypeer<span class='op'>=</span><span class='fl'>0</span><span class='op'>)</span><span class='op'>)</span>
<span class='co'># This example will allow you to change the http protocol version while connecting!</span>
<span class='co'># Changing the http version is useful when encountering curl related errors </span>
<span class='va'>conn</span> <span class='op'>=</span> <span class='fu'>catmaid_login</span><span class='op'>(</span>config<span class='op'>=</span><span class='fu'>httr</span><span class='fu'>::</span><span class='fu'><a href='https://httr.r-lib.org/reference/config.html'>config</a></span><span class='op'>(</span>http_version<span class='op'>=</span><span class='fl'>1</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'>## now do stuff with the connection like</span>
<span class='va'>skel</span><span class='op'>=</span><span class='fu'><a href='catmaid_fetch.html'>catmaid_fetch</a></span><span class='op'>(</span><span class='st'>"1/10418394/0/0/compact-skeleton"</span>, conn<span class='op'>=</span><span class='va'>conn</span><span class='op'>)</span>
<span class='co'># you can also omit the connecttion because it will be cached and reused</span>
<span class='va'>skel</span><span class='op'>=</span><span class='fu'><a href='catmaid_fetch.html'>catmaid_fetch</a></span><span class='op'>(</span><span class='st'>"1/10418394/0/0/compact-skeleton"</span><span class='op'>)</span>

<span class='co'>## or for those who want to work at the lowest level</span>
<span class='va'>skel2</span><span class='op'>=</span><span class='fu'>GET</span><span class='op'>(</span><span class='st'>"https://mycatmaidserver.org/catmaidroot/1/10418394/0/0/compact-skeleton"</span>,
  config<span class='op'>=</span><span class='va'>conn</span><span class='op'>$</span><span class='va'>config</span><span class='op'>)</span>
<span class='op'>}</span>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Gregory Jefferis.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


