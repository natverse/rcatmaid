<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Fetch position and other information for arbitrary treenode ids — catmaid_get_treenodes_detail • catmaid</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Fetch position and other information for arbitrary treenode ids — catmaid_get_treenodes_detail"><meta property="og:description" content="Fetch position and other information for arbitrary treenode ids"><meta property="og:image" content="/logo.svg"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">catmaid</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.10.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/example-drosophila-larva-olfactory-system.html">Introductory Example - Drosophila Larval Olfaction</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
<li>
  <a href="../SUPPORT.html">Help</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://natverse.github.io" class="external-link">natverse</a>
</li>
<li>
  <a href="https://github.com/jefferis/rcatmaid" class="external-link">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Fetch position and other information for arbitrary treenode ids</h1>
    <small class="dont-index">Source: <a href="https://github.com/jefferis/rcatmaid/blob/HEAD/R/catmaid_skeleton.R" class="external-link"><code>R/catmaid_skeleton.R</code></a></small>
    <div class="hidden name"><code>catmaid_get_treenodes_detail.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Fetch position and other information for arbitrary treenode ids</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">catmaid_get_treenodes_detail</span><span class="op">(</span>
  tnids <span class="op">=</span> <span class="cn">NULL</span>,
  labels <span class="op">=</span> <span class="cn">NULL</span>,
  skids <span class="op">=</span> <span class="cn">NULL</span>,
  pid <span class="op">=</span> <span class="fl">1</span>,
  conn <span class="op">=</span> <span class="cn">NULL</span>,
  raw <span class="op">=</span> <span class="cn">FALSE</span>,
  <span class="va">...</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>tnids</dt>
<dd><p>One or more (integer) treenode ids</p></dd>
<dt>labels</dt>
<dd><p>One or more (character) labels with which nodes must be tagged</p></dd>
<dt>skids</dt>
<dd><p>One or more skeleton ids or an expression compatible with
<code><a href="catmaid_skids.html">catmaid_skids</a></code> (see Details for advice re many skids)</p></dd>
<dt>pid</dt>
<dd><p>project id (default 1)</p></dd>
<dt>conn</dt>
<dd><p>the <code><a href="catmaid_login.html">catmaid_connection</a></code> object</p></dd>
<dt>raw</dt>
<dd><p>Whether to return completely unprocessed data (when <code>TRUE</code>) 
or to convert the nodes and connectors lists into processed data.frames 
(when <code>FALSE</code>, the default)</p></dd>
<dt>...</dt>
<dd><p>Additional arguments passed to the <code><a href="catmaid_fetch.html">catmaid_fetch</a></code> 
function.</p></dd>
</dl></div>
    <div id="value">
    <h2>Value</h2>
    <ul><li><p>treenode_id,</p></li>
<li><p>parent_id,</p></li>
<li><p>x,</p></li>
<li><p>y,</p></li>
<li><p>z,</p></li>
<li><p>confidence,</p></li>
<li><p>radius,</p></li>
<li><p>skid,</p></li>
<li><p>edition_time,</p></li>
<li><p>user_id</p></li>
</ul></div>
    <div id="details">
    <h2>Details</h2>
    <p>The key feature of this function is that allows you to fetch
  information for arbitrary tree nodes that do not need to be from the same
  skeleton. Furthermore the nodes can be defined by the presence of labels
  (tags) or by a skeleton id. <code>labels</code> and <code>skids</code> specifiers can
  be combined in order e.g. to find details for the somata for a given set of
  skeleton ids. However these queries are slow for more than a few hundred
  skids, at which point it is better to fetch using the label and then filter
  by skid post hoc in R.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="catmaid_get_treenode_table.html">catmaid_get_treenode_table</a></code>,
  <code><a href="catmaid_get_connectors.html">catmaid_get_connectors</a></code>,
  <code><a href="catmaid_get_compact_skeleton.html">catmaid_get_compact_skeleton</a></code></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="co"># \donttest{</span></span>
<span class="r-in"><span class="co"># details for 3 nodes from two different skeletons</span></span>
<span class="r-in"><span class="fu">catmaid_get_treenodes_detail</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">9943214L</span>, <span class="fl">25069047L</span>, <span class="fl">12829015L</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   treenode_id parent_id       x       y     z confidence radius     skid</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1     9943214        NA 65439.8 20611.2 41250          5   1911  4453485</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2    25069047  10983327 53296.5 14791.1 42650          5     -1  4453485</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3    12829015  12829014 59222.2 65869.2 51150          5     -1 10418394</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   edition_time user_id</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   1625302974      18</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   1625302974      71</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   1625302974      18</span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># example label search</span></span>
<span class="r-in"><span class="va">tosoma</span><span class="op">=</span><span class="fu">catmaid_get_treenodes_detail</span><span class="op">(</span>labels<span class="op">=</span><span class="st">"to soma"</span><span class="op">)</span></span>
<span class="r-in"><span class="co"># }</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span>
<span class="r-in"><span class="co"># If you have a lot of skids to query you will need to break up your queries</span></span>
<span class="r-in"><span class="co"># into smaller chunks. You could do this like so:</span></span>
<span class="r-in"><span class="va">catmaid_get_treenodes_detail_chunked</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">skids</span>, <span class="va">chunksize</span><span class="op">=</span><span class="fl">300</span>, <span class="va">chunkstoread</span><span class="op">=</span><span class="cn">NULL</span>, <span class="va">...</span><span class="op">)</span> <span class="op">{</span></span>
<span class="r-in">  <span class="va">nchunks</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">ceiling</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">skids</span><span class="op">)</span><span class="op">/</span><span class="va">chunksize</span><span class="op">)</span></span>
<span class="r-in">  <span class="va">chunks</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_len</a></span><span class="op">(</span><span class="va">nchunks</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="va">chunksize</span>, <span class="va">nchunks</span><span class="op">)</span><span class="op">)</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_along</a></span><span class="op">(</span><span class="va">skids</span><span class="op">)</span><span class="op">]</span></span>
<span class="r-in">  </span>
<span class="r-in">  <span class="va">l</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span></span>
<span class="r-in">  <span class="kw">if</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html" class="external-link">is.null</a></span><span class="op">(</span><span class="va">chunkstoread</span><span class="op">)</span><span class="op">)</span> <span class="va">chunkstoread</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_len</a></span><span class="op">(</span><span class="va">nchunks</span><span class="op">)</span></span>
<span class="r-in">  <span class="va">pb</span> <span class="op">&lt;-</span> <span class="fu">progress</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/progress/man/progress_bar.html" class="external-link">progress_bar</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>total <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">skids</span><span class="op">)</span>,</span>
<span class="r-in">                                   format <span class="op">=</span> <span class="st">"  :current/:total [:bar]  eta: :eta"</span>,</span>
<span class="r-in">                                   show_after<span class="op">=</span><span class="fl">1</span><span class="op">)</span></span>
<span class="r-in">  </span>
<span class="r-in">  <span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="va">chunkstoread</span><span class="op">)</span> <span class="op">{</span></span>
<span class="r-in">    <span class="va">pb</span><span class="op">$</span><span class="fu">tick</span><span class="op">(</span>len <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">chunks</span><span class="op">==</span><span class="va">i</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in">    <span class="va">l</span><span class="op">[[</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">l</span><span class="op">)</span><span class="op">+</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">=</span><span class="fu">catmaid_get_treenodes_detail</span><span class="op">(</span>skids<span class="op">=</span><span class="va">skids</span><span class="op">[</span><span class="va">chunks</span><span class="op">==</span><span class="va">i</span><span class="op">]</span>, <span class="va">...</span><span class="op">)</span></span>
<span class="r-in">  <span class="op">}</span></span>
<span class="r-in">  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind.html" class="external-link">bind_rows</a></span><span class="op">(</span><span class="va">l</span><span class="op">)</span></span>
<span class="r-in"><span class="op">}</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="op">}</span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Gregory Jefferis.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a>
2.0.1.</p>
</div>

      </footer></div>

  


  

  </body></html>

